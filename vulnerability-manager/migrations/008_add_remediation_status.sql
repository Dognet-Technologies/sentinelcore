-- Migration: Add remediation status tracking to device_vulnerabilities

ALTER TABLE device_vulnerabilities
ADD COLUMN IF NOT EXISTS remediation_status VARCHAR(50) DEFAULT 'open',
ADD COLUMN IF NOT EXISTS remediated_at TIMESTAMPTZ;

-- Create index for better query performance
CREATE INDEX IF NOT EXISTS idx_device_vulnerabilities_status ON device_vulnerabilities(remediation_status);

-- Add comments for documentation
COMMENT ON COLUMN device_vulnerabilities.remediation_status IS 'Remediation status: open, in_progress, remediated, failed';
COMMENT ON COLUMN device_vulnerabilities.remediated_at IS 'Timestamp when vulnerability was successfully remediated';
