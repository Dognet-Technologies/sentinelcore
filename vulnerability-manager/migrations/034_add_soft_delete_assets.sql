-- Migration 034: Add soft delete support for assets
-- Date: 2025-12-17
-- Purpose: Add deleted_at column to assets table for soft delete functionality

ALTER TABLE assets ADD COLUMN IF NOT EXISTS deleted_at TIMESTAMPTZ DEFAULT NULL;

CREATE INDEX IF NOT EXISTS idx_assets_deleted_at ON assets(deleted_at) WHERE deleted_at IS NULL;

COMMENT ON COLUMN assets.deleted_at IS 'Timestamp when asset was soft-deleted. NULL means active asset.';
