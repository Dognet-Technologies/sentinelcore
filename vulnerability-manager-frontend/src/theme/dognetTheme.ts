// src/theme/dognetTheme.ts
import { createTheme, ThemeOptions, alpha } from '@mui/material/styles';
import type {} from '@mui/x-data-grid/themeAugmentation';

/* ============================================================
   PALETTE — DOGNET PROFESSIONAL
   ============================================================ */

const dognetPalette = {
  primary: {
    main: '#e5e7eb',
    light: '#f3f4f6',
    dark: '#9ca3af',
    contrastText: '#000000',
  },
  secondary: {
    main: '#9ca3af',
    light: '#d1d5db',
    dark: '#6b7280',
    contrastText: '#000000',
  },
  error: {
    main: '#dc2626',
    light: '#f87171',
    dark: '#991b1b',
  },
  warning: {
    main: '#f59e0b',
    light: '#fbbf24',
    dark: '#b45309',
  },
  success: {
    main: '#16a34a',
    light: '#4ade80',
    dark: '#14532d',
  },
  info: {
    main: '#38bdf8',
    light: '#7dd3fc',
    dark: '#0284c7',
  },
  background: {
    default: '#000000',
    paper: '#0b0b0b',
  },
  text: {
    primary: '#f9fafb',
    secondary: '#9ca3af',
    disabled: '#4b5563',
  },
  divider: 'rgba(255,255,255,0.08)',
};

/* ============================================================
   PALETTE — DOGNET BLACK (Ultra Dark Variant)
   ============================================================ */

const dognetBlackPalette = {
  primary: {
    main: '#d1d5db',
    light: '#e5e7eb',
    dark: '#9ca3af',
    contrastText: '#000000',
  },
  secondary: {
    main: '#6b7280',
    light: '#9ca3af',
    dark: '#4b5563',
    contrastText: '#ffffff',
  },
  error: {
    main: '#b91c1c',
    light: '#dc2626',
    dark: '#7f1d1d',
  },
  warning: {
    main: '#d97706',
    light: '#f59e0b',
    dark: '#92400e',
  },
  success: {
    main: '#15803d',
    light: '#16a34a',
    dark: '#0c2818',
  },
  info: {
    main: '#0284c7',
    light: '#38bdf8',
    dark: '#075985',
  },
  background: {
    default: '#000000',
    paper: '#050505',
  },
  text: {
    primary: '#f5f5f5',
    secondary: '#9ca3af',
    disabled: '#4b5563',
  },
  divider: 'rgba(255,255,255,0.05)',
};

/* ============================================================
   COLORI CUSTOM (severity / status / chart)
   ============================================================ */

const customColors = {
  severity: {
    critical: '#b91c1c',
    high: '#dc2626',
    medium: '#f59e0b',
    low: '#65a30d',
    info: '#0284c7',
  },
  status: {
    open: '#dc2626',
    inProgress: '#f59e0b',
    resolved: '#16a34a',
    closed: '#6b7280',
  },
  chart: {
    primary: ['#e5e7eb', '#9ca3af', '#6b7280', '#4b5563'],
    secondary: ['#d1d5db', '#6b7280', '#4b5563', '#374151'],
    mixed: ['#dc2626', '#f59e0b', '#16a34a', '#38bdf8'],
  },
};

/* ============================================================
   OMBRE
   ============================================================ */

const customShadows = {
  card: '0 4px 6px -1px rgba(0, 0, 0, 0.3), 0 2px 4px -1px rgba(0, 0, 0, 0.2)',
  cardHover: '0 20px 25px -5px rgba(0, 0, 0, 0.4), 0 10px 10px -5px rgba(0, 0, 0, 0.3)',
  button: '0 1px 3px 0 rgba(0, 0, 0, 0.3), 0 1px 2px 0 rgba(0, 0, 0, 0.2)',
  buttonHover: '0 10px 15px -3px rgba(0, 0, 0, 0.5), 0 4px 6px -2px rgba(0, 0, 0, 0.3)',
  drawer: '0 25px 50px -12px rgba(0, 0, 0, 0.7)',
  appBar: '0 10px 15px -3px rgba(0, 0, 0, 0.4)',
};

/* ============================================================
   THEME AUGMENTATION
   ============================================================ */

declare module '@mui/material/styles' {
  interface Theme {
    severity: typeof customColors.severity;
    status: typeof customColors.status;
    chart: typeof customColors.chart;
    customShadows: typeof customShadows;
  }
  interface ThemeOptions {
    severity?: typeof customColors.severity;
    status?: typeof customColors.status;
    chart?: typeof customColors.chart;
    customShadows?: typeof customShadows;
  }
}

/* ============================================================
   THEME OPTIONS — DOGNET PROFESSIONAL
   ============================================================ */

const dognetThemeOptions: ThemeOptions = {
  palette: {
    mode: 'dark',
    ...dognetPalette,
  },
  shape: {
    borderRadius: 12,
  },
  typography: {
    fontFamily: [
      'Inter',
      '-apple-system',
      'BlinkMacSystemFont',
      '"Segoe UI"',
      'Roboto',
      'sans-serif',
    ].join(','),
    h1: { fontSize: '2.4rem', fontWeight: 600 },
    h2: { fontSize: '2rem', fontWeight: 600 },
    h3: { fontSize: '1.75rem', fontWeight: 600 },
    h4: { fontSize: '1.5rem', fontWeight: 600 },
    h5: { fontSize: '1.25rem', fontWeight: 600 },
    h6: { fontSize: '1rem', fontWeight: 600 },
    body1: { fontSize: '0.95rem', lineHeight: 1.6 },
    body2: { fontSize: '0.875rem', lineHeight: 1.6 },
  },
  components: {
    MuiCssBaseline: {
      styleOverrides: {
        body: {
          backgroundColor: dognetPalette.background.default,
          scrollbarColor: '#4b5563 #000000',
          '&::-webkit-scrollbar': { width: 8, height: 8 },
          '&::-webkit-scrollbar-thumb': {
            backgroundColor: '#4b5563',
            borderRadius: 8,
          },
        },
      },
    },
    MuiAppBar: {
      styleOverrides: {
        root: {
          backgroundColor: alpha('#000000', 0.85),
          backdropFilter: 'blur(16px)',
          boxShadow: customShadows.appBar,
          borderBottom: '1px solid rgba(255,255,255,0.06)',
        },
      },
    },
    MuiDrawer: {
      styleOverrides: {
        paper: {
          backgroundColor: dognetPalette.background.paper,
          boxShadow: customShadows.drawer,
          borderRight: '1px solid rgba(255,255,255,0.06)',
        },
      },
    },
    MuiCard: {
      styleOverrides: {
        root: {
          backgroundColor: dognetPalette.background.paper,
          boxShadow: customShadows.card,
          transition: 'all .3s ease',
          '&:hover': {
            boxShadow: customShadows.cardHover,
          },
        },
      },
    },
    MuiButton: {
      styleOverrides: {
        root: {
          textTransform: 'none',
          fontWeight: 500,
          boxShadow: customShadows.button,
          '&:hover': {
            boxShadow: customShadows.buttonHover,
          },
        },
        contained: {
          backgroundColor: '#111827',
          color: '#f9fafb',
          '&:hover': {
            backgroundColor: '#1f2937',
          },
        },
      },
    },
    MuiTextField: {
      styleOverrides: {
        root: {
          '& .MuiOutlinedInput-root': {
            backgroundColor: alpha('#ffffff', 0.03),
            '& fieldset': {
              borderColor: 'rgba(255,255,255,0.12)',
            },
            '&:hover fieldset': {
              borderColor: 'rgba(255,255,255,0.25)',
            },
            '&.Mui-focused fieldset': {
              borderColor: dognetPalette.primary.main,
            },
          },
        },
      },
    },
    MuiDataGrid: {
      styleOverrides: {
        root: {
          backgroundColor: dognetPalette.background.paper,
          border: 'none',
          '& .MuiDataGrid-columnHeaders': {
            backgroundColor: '#050505',
          },
          '& .MuiDataGrid-row:hover': {
            backgroundColor: alpha('#ffffff', 0.04),
          },
          '& .MuiDataGrid-row.Mui-selected': {
            backgroundColor: alpha('#ffffff', 0.08),
          },
        },
      },
    },
    MuiTooltip: {
      styleOverrides: {
        tooltip: {
          backgroundColor: '#111827',
          boxShadow: customShadows.card,
          fontSize: '0.8rem',
        },
      },
    },
  },
};

/* ============================================================
   THEME OPTIONS — DOGNET BLACK
   ============================================================ */

const dognetBlackThemeOptions: ThemeOptions = {
  palette: {
    mode: 'dark',
    ...dognetBlackPalette,
  },
  shape: {
    borderRadius: 12,
  },
  typography: {
    fontFamily: [
      'Inter',
      '-apple-system',
      'BlinkMacSystemFont',
      '"Segoe UI"',
      'Roboto',
      'sans-serif',
    ].join(','),
    h1: { fontSize: '2.4rem', fontWeight: 600 },
    h2: { fontSize: '2rem', fontWeight: 600 },
    h3: { fontSize: '1.75rem', fontWeight: 600 },
    h4: { fontSize: '1.5rem', fontWeight: 600 },
    h5: { fontSize: '1.25rem', fontWeight: 600 },
    h6: { fontSize: '1rem', fontWeight: 600 },
    body1: { fontSize: '0.95rem', lineHeight: 1.6 },
    body2: { fontSize: '0.875rem', lineHeight: 1.6 },
  },
  components: {
    MuiCssBaseline: {
      styleOverrides: {
        body: {
          backgroundColor: dognetBlackPalette.background.default,
          scrollbarColor: '#4b5563 #000000',
          '&::-webkit-scrollbar': { width: 8, height: 8 },
          '&::-webkit-scrollbar-thumb': {
            backgroundColor: '#4b5563',
            borderRadius: 8,
          },
        },
      },
    },
    MuiAppBar: {
      styleOverrides: {
        root: {
          backgroundColor: alpha('#000000', 0.95),
          backdropFilter: 'blur(16px)',
          boxShadow: customShadows.appBar,
          borderBottom: '1px solid rgba(255,255,255,0.03)',
        },
      },
    },
    MuiDrawer: {
      styleOverrides: {
        paper: {
          backgroundColor: dognetBlackPalette.background.paper,
          boxShadow: customShadows.drawer,
          borderRight: '1px solid rgba(255,255,255,0.03)',
        },
      },
    },
    MuiCard: {
      styleOverrides: {
        root: {
          backgroundColor: dognetBlackPalette.background.paper,
          boxShadow: customShadows.card,
          transition: 'all .3s ease',
          '&:hover': {
            boxShadow: customShadows.cardHover,
          },
        },
      },
    },
    MuiButton: {
      styleOverrides: {
        root: {
          textTransform: 'none',
          fontWeight: 500,
          boxShadow: customShadows.button,
          '&:hover': {
            boxShadow: customShadows.buttonHover,
          },
        },
        contained: {
          backgroundColor: '#0a0a0a',
          color: '#f5f5f5',
          '&:hover': {
            backgroundColor: '#1a1a1a',
          },
        },
      },
    },
    MuiTextField: {
      styleOverrides: {
        root: {
          '& .MuiOutlinedInput-root': {
            backgroundColor: alpha('#ffffff', 0.02),
            '& fieldset': {
              borderColor: 'rgba(255,255,255,0.08)',
            },
            '&:hover fieldset': {
              borderColor: 'rgba(255,255,255,0.15)',
            },
            '&.Mui-focused fieldset': {
              borderColor: dognetBlackPalette.primary.main,
            },
          },
        },
      },
    },
    MuiDataGrid: {
      styleOverrides: {
        root: {
          backgroundColor: dognetBlackPalette.background.paper,
          border: 'none',
          '& .MuiDataGrid-columnHeaders': {
            backgroundColor: '#000000',
          },
          '& .MuiDataGrid-row:hover': {
            backgroundColor: alpha('#ffffff', 0.02),
          },
          '& .MuiDataGrid-row.Mui-selected': {
            backgroundColor: alpha('#ffffff', 0.04),
          },
        },
      },
    },
    MuiTooltip: {
      styleOverrides: {
        tooltip: {
          backgroundColor: '#1a1a1a',
          boxShadow: customShadows.card,
          fontSize: '0.8rem',
        },
      },
    },
  },
};

/* ============================================================
   EXPORT
   ============================================================ */

export const dognetTheme = createTheme({
  ...dognetThemeOptions,
  severity: customColors.severity,
  status: customColors.status,
  chart: customColors.chart,
  customShadows,
});

export const dognetBlackTheme = createTheme({
  ...dognetBlackThemeOptions,
  severity: customColors.severity,
  status: customColors.status,
  chart: customColors.chart,
  customShadows,
});

export default dognetTheme;
