import React from 'react';
import { Box, Typography, useTheme, alpha } from '@mui/material';
import { motion } from 'framer-motion';

interface AnimatedProgressProps {
  value: number;
  label: string;
  color?: string;
}

export const AnimatedProgress: React.FC<AnimatedProgressProps> = ({ 
  value, 
  label, 
  color 
}) => {
  const theme = useTheme();
  const progressColor = color || theme.palette.primary.main;
  
  return (
    <Box sx={{ width: '100%' }}>
      <Box sx={{ display: 'flex', justifyContent: 'space-between', mb: 1 }}>
        <Typography variant="body2" color="text.secondary">
          {label}
        </Typography>
        <Typography variant="body2" fontWeight={600}>
          {value}%
        </Typography>
      </Box>
      <Box 
        sx={{ 
          height: 8, 
          borderRadius: 4,
          backgroundColor: alpha(progressColor, 0.1),
          overflow: 'hidden',
          position: 'relative',
        }}
      >
        <motion.div
          initial={{ width: 0 }}
          animate={{ width: `${value}%` }}
          transition={{ duration: 1, ease: "easeOut" }}
          style={{
            height: '100%',
            background: `linear-gradient(90deg, ${progressColor} 0%, ${alpha(progressColor, 0.8)} 100%)`,
            borderRadius: 4,
            position: 'relative',
            overflow: 'hidden',
          }}
        >
          <motion.div
            animate={{
              x: ['0%', '100%'],
            }}
            transition={{
              repeat: Infinity,
              duration: 2,
              ease: "linear",
            }}
            style={{
              position: 'absolute',
              top: 0,
              left: '-100%',
              right: '-100%',
              bottom: 0,
              background: `linear-gradient(90deg, transparent, ${alpha(theme.palette.common.white, 0.3)}, transparent)`,
            }}
          />
        </motion.div>
      </Box>
    </Box>
  );
};