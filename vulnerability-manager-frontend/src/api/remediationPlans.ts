// api/remediationPlans.ts - API client for remediation plans
import apiClient from '../services/api';

export interface RemediationPlan {
  id: string;
  name: string;
  description?: string;
  created_by: string;
  assigned_team_id?: string;
  status: string;
  priority: number;
  due_date?: string;
  started_at?: string;
  completed_at?: string;
  created_at: string;
  updated_at: string;
}

export interface NewRemediationPlan {
  name: string;
  description?: string;
  assigned_team_id?: string;
  priority?: number;
  due_date?: string;
}

export interface UpdateRemediationPlan {
  name?: string;
  description?: string;
  assigned_team_id?: string;
  status?: string;
  priority?: number;
  due_date?: string;
}

export const remediationPlansApi = {
  // Get all remediation plans
  getAll: async (): Promise<RemediationPlan[]> => {
    const response = await apiClient.get('/api/remediation-plans');
    return response.data;
  },

  // Get single remediation plan
  getById: async (id: string): Promise<RemediationPlan> => {
    const response = await apiClient.get(`/api/remediation-plans/${id}`);
    return response.data;
  },

  // Create new remediation plan
  create: async (data: NewRemediationPlan): Promise<RemediationPlan> => {
    const response = await apiClient.post('/api/remediation-plans', data);
    return response.data;
  },

  // Update remediation plan
  update: async (id: string, data: UpdateRemediationPlan): Promise<RemediationPlan> => {
    const response = await apiClient.put(`/api/remediation-plans/${id}`, data);
    return response.data;
  },

  // Delete remediation plan
  delete: async (id: string): Promise<void> => {
    await apiClient.delete(`/api/remediation-plans/${id}`);
  },
};
